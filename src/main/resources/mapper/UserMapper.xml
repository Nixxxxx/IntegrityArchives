<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.iotlab.integrityarchives.dao.UserDao">

    <!-- 根据文章id查询其关联分类表中的数据 -->
    <select id="findUserInfoByUserId" parameterType="integer" resultType="com.iotlab.integrityarchives.entity.UserInfo">
        SELECT  tui.id,tui.user_number,tui.user_passwd,tui.user_info,tui.salt,
              tui.create_time,tui.last_edit_time,tui.enable_status
        FROM tb_user tu, tb_user_info tui
        WHERE tu.id=tui.id AND tu.id = #{id}
    </select>





</mapper>










<!--
<mapper namespace="com.jiang.kaoyan.dao.UserDao">

	<resultMap type="User" id="UserResult">
		<result property="userId" column="user_id"/>
		<result property="username" column="username"/>
		<result property="password" column="password"/>
		<result property="info" column="info"/>
		<result property="createTime" column="create_time"/>
		<result property="lastEditTime" column="last_edit_time"/>
		<result property="enableStatus" column="enable_status"/>
	</resultMap>
	
	<insert id="create" parameterType="User">
		insert user
		<set>
		    <if test="username!=null and username!='' ">
				username=#{username},
			</if>
		    <if test="password!=null and password!='' ">
				password=#{password},
			</if>
		    <if test="info!=null and info!='' ">
				info=#{info},
			</if>
		    <if test="createTime!=null and createTime!='' ">
				create_time=#{createTime},
			</if>
		    <if test="lastEditTime!=null and lastEditTime!='' ">
				last_edit_time=#{lastEditTime},
			</if>
		    <if test="enableStatus!=null and enableStatus!='' ">
				enable_status=#{enableStatus},
			</if>
		</set>
	</insert>
	
	<delete id="delete" parameterType="Integer">
		delete from user where user_id=#{id}
	</delete>

	<update id="update" parameterType="User">
		update user
		<set>
			<if test="username!=null and username!='' ">
				username=#{username},
			</if>
			<if test="password!=null and password!='' ">
				password=#{password},
			</if>
			<if test="info!=null and info!='' ">
				info=#{info},
			</if>
			<if test="createTime!=null and createTime!='' ">
				create_time=#{createTime},
			</if>
			<if test="lastEditTime!=null and lastEditTime!='' ">
				last_edit_time=#{lastEditTime},
			</if>
			<if test="enableStatus!=null and enableStatus!='' ">
				enable_status=#{enableStatus},
			</if>
		</set>
		where user_id=#{id}
	</update>

	<select id="findByUsername" parameterType="String" resultMap="UserResult">
		select * from admin where username=#{username}
	</select>

	<select id="findOne" parameterType="Integer" resultMap="UserResult">
		select * from user where user_id=#{id}
	</select>
	
	<select id="findAll" resultMap="UserResult">
		select * from user order by user_id desc
	</select>

	<select id="countAll" resultType="Integer">
		select count(*) from user
	</select>

	<select id="findByPage" parameterType="Map" resultMap="UserResult">
		select * from user order by user_id desc
		<if test="start!=null and quantity!=null">
			limit #{start},#{quantity}
		</if>
	</select>	
</mapper> -->
